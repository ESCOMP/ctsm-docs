

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.3.1. What are the CLM tools &mdash; ctsm release-clm5.0.32 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="ctsm release-clm5.0.32 documentation" href="../../index.html"/>
        <link rel="up" title="1.3. Using CLM tools" href="index.html"/>
        <link rel="next" title="1.3.2. Building the CLM tools" href="building-the-clm-tools.html"/>
        <link rel="prev" title="1.3. Using CLM tools" href="index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> ctsm
          

          
          </a>

          
            
            
              <div class="version">
                
                  <div class="version-dropdown">
                    <select class="version-list" id="version-list">
                      <option value=''>CLM5.0</option>
                      
                        
                      
                        
                          <option value="">[placeholder]</option>
                        
                      
                    </select>
                  </div>
                
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">1. CLM5.0 User’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview/index.html">1.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setting-up-and-running-a-case/index.html">1.2. Setting Up and Running a Case</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">1.3. Using CLM tools</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">1.3.1. What are the CLM tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#running-fortran-tools-with-namelists">1.3.1.1. Running FORTRAN tools with namelists</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-fortran-tools-with-command-line-options">1.3.1.2. Running FORTRAN tools with command line options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-fortran-tools-built-with-smp-true">1.3.1.3. Running FORTRAN tools built with SMP=TRUE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-ncl">1.3.1.4. Using NCL</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="building-the-clm-tools.html">1.3.2. Building the CLM tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="building-the-clm-tools.html#building-the-clm-tools-that-use-the-cime-configure-build-system">1.3.3. Building the CLM tools that use the CIME configure/build system</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-input-for-surface-dataset-generation.html">1.3.4. Creating input for surface dataset generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-surface-datasets.html">1.3.5. Creating Surface Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="datasts-for-observational-sites.html">1.3.6. Datasets for Observational Sites</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-domain-files.html">1.3.7. Creating CLM domain files</a></li>
<li class="toctree-l3"><a class="reference internal" href="observational-sites-datasets.html">1.3.8. Observational Sites Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="cprnc.html">1.3.9. Comparing History Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../adding-new-resolutions/index.html">1.4. Adding New Resolutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running-special-cases/index.html">1.5. Running Special Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running-single-points/index.html">1.6. Running Single Point Regional Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running-PTCLM/index.html">1.7. Running PTCLM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trouble-shooting/index.html">1.8. Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/index.html">1.9. Testing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tech_note/index.html">2. CLM Technical Note</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ctsm</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">1. CLM5.0 User’s Guide</a> &raquo;</li>
        
          <li><a href="index.html">1.3. Using CLM tools</a> &raquo;</li>
        
      <li>1.3.1. What are the CLM tools</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/users_guide/using-clm-tools/what-are-the-clm-tools.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="what-are-the-clm-tools">
<span id="id1"></span><h1>1.3.1. What are the CLM tools<a class="headerlink" href="#what-are-the-clm-tools" title="Permalink to this headline">¶</a></h1>
<p>There are several tools provided with CLM that allow you to create your own input datasets at resolutions you choose, or to interpolate initial conditions to a different resolution, or used to compare CLM history files between different cases.
The tools are all available in the <code class="docutils literal notranslate"><span class="pre">$CTSMROOT/tools</span></code> directory.
Most of the tools are FORTRAN stand-alone programs in their own directory, but there is also a suite of NCL scripts in the <code class="docutils literal notranslate"><span class="pre">$CTSMROOT/tools//ncl_scripts</span></code> directory, and some of the tools are scripts that may also call the ESMF regridding program.
Some of the NCL scripts are very specialized and not meant for general use, and we won’t document them here.
They still contain documentation in the script itself and the README file in the tools directory.</p>
<p>The tools produce files that can be used for CLM4.5 and CLM5.0. They do <strong>NOT</strong> produce files that can be used for CLM4.0.
If you need files for CLM4.0, you’ll need to use a previous version of CLM.</p>
<p>The list of generally important scripts and programs are as follows.</p>
<ol class="arabic simple">
<li><em>./mkmapgrids</em> to create SCRIP grid data files from old CLM format grid files that can then be used to create new CLM datasets (deprecated). There is also a NCL script (<code class="docutils literal notranslate"><span class="pre">./mkmapgrids/mkscripgrid.ncl</span></code> to create SCRIP grid files for regular latitude/longitude grids.</li>
<li><em>./mkmapdata</em> to create SCRIP mapping data file from SCRIP grid files (uses ESMF).</li>
<li><em>mksurfdata_map</em> to create surface datasets from grid datasets (clm4_0 and CLM5.0 versions).</li>
<li><em>./mkprocdata_map</em> to interpolate output unstructured grids (such as the CAM HOMME dy-core “ne” grids like ne30np4) into a 2D regular lat/long grid format that can be plotted easily. Can be used by either clm4_0 or CLM5.0.</li>
<li><em>$CIMEROOT/tools/mapping/gen_domain_files/gen_domain</em> to create a domain file for datm from a mapping file. The domain file is then used by BOTH datm AND CLM to define the grid and land-mask.</li>
<li><em>$CIMEROOT/tools/cprnc</em> to compare two NetCDF files.</li>
</ol>
<p>In the sections to come we will go into detailed description of how to use each of these tools in turn.
First, however we will discuss the common environment variables and options that are used by all of the FORTRAN tools.
Second, we go over the outline of the entire file creation process for all input files needed by CLM for a new resolution, then we turn to each tool.
In the last section we will discuss how to customize files for particular observational sites.</p>
<p>The FORTRAN tools (mksurfdata_map and mkprocdata_map) run, with a namelist (mksurfdata_map) to provide options, or with command line arguments (mkprocdata_map).</p>
<p>In the following sections, we will outline how to make these files available for build-namelist so that you can easily create simulations that include them.
In the chapter on single-point and regional datasets we also give an alternative way to enter new datasets without having to edit files.</p>
<div class="section" id="running-fortran-tools-with-namelists">
<h2>1.3.1.1. Running FORTRAN tools with namelists<a class="headerlink" href="#running-fortran-tools-with-namelists" title="Permalink to this headline">¶</a></h2>
<p><strong>mksurfdata_map</strong> runs with a namelist that is read from standard input.
Hence, you create a namelist and then run them by redirecting the namelist file into standard input as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">program</span> <span class="o">&lt;</span> <span class="n">namelist</span>
</pre></div>
</div>
<p>There is a sample namelist called <code class="docutils literal notranslate"><span class="pre">$CTSMROOT/tools/mksurfdata_map/mksurfdata_map.namleist</span></code> that shows you what the
namelist should look like. <strong>mksurfdata_map</strong> also has a script that creates the namelist and runs the program for you.
Namelists that you create should be similar to the example namelist.
The namelist values are also documented along with the other namelists in the:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$CTSMROOT/bld/namelist_files/namelist_definition.xml`` file
     and default values in the:
$CTSMROOT/bld/namelist_files/namelist_defaults_clm_tools.xml`` file.
</pre></div>
</div>
</div>
<div class="section" id="running-fortran-tools-with-command-line-options">
<h2>1.3.1.2. Running FORTRAN tools with command line options<a class="headerlink" href="#running-fortran-tools-with-command-line-options" title="Permalink to this headline">¶</a></h2>
<p><strong>gen_domain</strong>, mkprocdata_map, and <strong>cprnc</strong> run with command line arguments.
The detailed sections below will give you more information on the command line arguments specific to each tool.
Also running the tool without any arguments will give you a general synopsis on how to run the tool.</p>
</div>
<div class="section" id="running-fortran-tools-built-with-smp-true">
<h2>1.3.1.3. Running FORTRAN tools built with SMP=TRUE<a class="headerlink" href="#running-fortran-tools-built-with-smp-true" title="Permalink to this headline">¶</a></h2>
<p>When you enable <code class="docutils literal notranslate"><span class="pre">SMP=TRUE</span></code> on your build of one of the tools that make use of it, you are using OpenMP for shared memory parallelism (SMP).
In SMP loops are run in parallel with different threads run on different processors all of which access the same memory (called on-node).
Thus you can only usefully run up to the number of processors that are available on a single-node of the machine you are running on.
For example, on the NCAR machine cheyenne there are 36 processors per node, so you can use up to 36 processors.</p>
</div>
<div class="section" id="using-ncl">
<h2>1.3.1.4. Using NCL<a class="headerlink" href="#using-ncl" title="Permalink to this headline">¶</a></h2>
<p>In the tools directory <code class="docutils literal notranslate"><span class="pre">$CTSMROOT/tools/ncl_scripts</span></code> and in a few other locations there are scripts that use NCAR Command Language (NCL).
Unlike the FORTRAN tools, you will need to get a copy of NCL in order to use them.
You also won’t have to build an executable in order to use them, hence no Makefile is provided.
NCL is provided for free download as either binaries or source code from: <a class="reference external" href="http://www.ncl.ucar.edu/">http://www.ncl.ucar.edu/</a>.
The NCL web-site also contains documentation on NCL and it’s use. These scripts are stand-alone and at most use environment variables to control how to use them. In some cases there are perl scripts with command line arguments that call the NCL scripts to control what they do.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="building-the-clm-tools.html" class="btn btn-neutral float-right" title="1.3.2. Building the CLM tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="1.3. Using CLM tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, UCAR.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
     
<script>var version_json_loc = "../../../../versions.json";</script>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/pop_ver.js"></script>
    

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>