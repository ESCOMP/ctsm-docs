

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.5.8. Running with historical CO2 forcing &mdash; ctsm release-clm5.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="ctsm release-clm5.0 documentation" href="../../index.html"/>
        <link rel="up" title="1.5. Running Special Cases" href="index.html"/>
        <link rel="next" title="1.5.9. Running with anomaly forcing" href="Running-with-anomaly-forcing.html"/>
        <link rel="prev" title="1.5.7. Running with atmospheric forcing from a previous simulation" href="Running-with-your-own-previous-simulation-as-atmospheric-forcing-to-spinup-the-model.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> ctsm
          

          
          </a>

          
            
            
              <div class="version">
                
                  <div class="version-dropdown">
                    <select class="version-list" id="version-list">
                      <option value=''>CLM5.0</option>
                      
                        
                      
                        
                          <option value="">[placeholder]</option>
                        
                      
                    </select>
                  </div>
                
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">1. CLM5.0 User’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview/index.html">1.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setting-up-and-running-a-case/index.html">1.2. Setting Up and Running a Case</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using-clm-tools/index.html">1.3. Using CLM tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../adding-new-resolutions/index.html">1.4. Adding New Resolutions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">1.5. Running Special Cases</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="what-is-a-special-case.html">1.5.1. What is a special case?</a></li>
<li class="toctree-l3"><a class="reference internal" href="running-the-prognostic-crop-model.html">1.5.2. Running the prognostic crop model</a></li>
<li class="toctree-l3"><a class="reference internal" href="running-with-irrigation.html">1.5.3. Running with irrigation</a></li>
<li class="toctree-l3"><a class="reference internal" href="Spinning-up-the-Satellite-Phenology-Model-CLMSP-spinup.html">1.5.4. Spinning up the Satellite Phenology Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="Spinning-up-the-biogeochemistry-BGC-spinup.html">1.5.5. Spinup of CLM5.0-BGC-Crop</a></li>
<li class="toctree-l3"><a class="reference internal" href="Running-with-MOAR-data-as-atmospheric-forcing-to-spinup-the-model.html">1.5.6. Running with MOAR data</a></li>
<li class="toctree-l3"><a class="reference internal" href="Running-with-your-own-previous-simulation-as-atmospheric-forcing-to-spinup-the-model.html">1.5.7. Running with atmospheric forcing from a previous simulation</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">1.5.8. Running with historical CO2 forcing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-transient-simulation-with-historical-co2">1.5.8.1. Example: Transient Simulation with Historical CO2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Running-with-anomaly-forcing.html">1.5.9. Running with anomaly forcing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../running-single-points/index.html">1.6. Running Single Point Regional Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running-PTCLM/index.html">1.7. Running PTCLM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trouble-shooting/index.html">1.8. Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/index.html">1.9. Testing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tech_note/index.html">2. CLM Technical Note</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ctsm</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html"><span class="section-number">1. </span>CLM5.0 User’s Guide</a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">1.5. </span>Running Special Cases</a> &raquo;</li>
        
      <li><span class="section-number">1.5.8. </span>Running with historical CO2 forcing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/users_guide/running-special-cases/Running-stand-alone-CLM-with-transient-historical-CO2-concentration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-with-historical-co2-forcing">
<span id="id1"></span><h1><span class="section-number">1.5.8. </span>Running with historical CO2 forcing<a class="headerlink" href="#running-with-historical-co2-forcing" title="Permalink to this headline">¶</a></h1>
<p>In this case you want to run a simulation with stand-alone CLM responding to changes in CO2 for a historical period.
For this example, we will start with the “I_1850-2000_CN” compset that has transient: land-use, Nitrogen and Aerosol deposition already.
You could also use another compset if you didn’t want these other features to be transient.
In order to get CO2 to be transient we need to add a new streams file and add it to the list of streams in the user_nl_datm file.
You also need a NetCDF datafile that datm can read that gives the variation. You could supply your own file, but we have a standard file that is used by CAM for this and our example will make use of this file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Most everything here has to do with changing datm rather than CLM to allow this to happen. As such the user that wishes to do this should first become more familiar with datm and read the <a class="reference external" href="CLM-URL">CESM Data Model User’s Guide</a> especially as it pertains to the datm.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This section documents the process for doing something that is non-standard. There may be errors with the documentation and process, and you may have to do some work before all of this works for you. If that is the case, we recommend that you do further research into understanding the process and the files, as well as understanding the datm and how it works. You may have to read documentation found in the code for datm as well as “csm_share”.</p>
</div>
<p>The datm has “streams” files that have rough XML-like syntax and specify the location and file to get data from, as well as information on the variable names and the data locations of the grid points.
The datm expects specific variable names and the datm “maps” the expected variable names from the file to the names expected by datm.
The file we are working with here is a file with a single-point, that covers the entire globe (so the vertices go from -90 to 90 degrees in latitude and 0 to 360 degrees in longitude).
Since it’s a single point it’s a little easier to work with than datasets that may be at a given horizontal resolution.
The datm also expects that variables will be in certain units, and only expects a limited number of variables so arbitrary fields can NOT be exchanged this way.
However, the process would be similar for datasets that do contain more than one point.</p>
<p>The three things that are needed: a domain file, a data file, and a streams text file.
The domain file is a CF-compliant NetCDF file that has information on the grid points (latitudes and longitudes for cell-centers and vertices, mask , fraction, and areas).
The datafile is a CF-compliant NetCDF file with the data that will be mapped.
The streams text file is the XML-like file that tells datm how to find the files and how to map the variables datm knows about to the variable names on the NetCDF files. Note, that in our case the domain file and the data file are the same file. In other cases, the domain file may be separate from the data file.</p>
<p>First we are going to create a case, and we will edit the <code class="docutils literal notranslate"><span class="pre">user_nl_datm</span></code> so that we add a CO2 data stream in.
There is a streams text file available in <code class="docutils literal notranslate"><span class="pre">$CTSMROOT/doc/UsersGuide/co2_streams.txt</span></code>, that includes file with a CO2 time-series from 1765 to 2007.</p>
<div class="section" id="example-transient-simulation-with-historical-co2">
<h2><span class="section-number">1.5.8.1. </span>Example: Transient Simulation with Historical CO2<a class="headerlink" href="#example-transient-simulation-with-historical-co2" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">cd</span> <span class="n">scripts</span>
<span class="o">&gt;</span> <span class="o">./</span><span class="n">create_newcase</span> <span class="o">-</span><span class="n">case</span> <span class="n">DATM_CO2_TSERIES</span> <span class="o">-</span><span class="n">res</span> <span class="n">f19_g17_gl4</span> <span class="o">-</span><span class="n">compset</span> <span class="n">IHistClm50BgcCrop</span>
<span class="o">&gt;</span> <span class="n">cd</span> <span class="n">DATM_CO2_TSERIES</span>

<span class="c1"># Historical CO2 will already be setup correctly for this compset</span>
<span class="c1"># to check that look at the variables: CCSM_BGC,CLM_CO2_TYPE, and DATM_CO2_TSERIES</span>
<span class="o">&gt;</span> <span class="o">./</span><span class="n">xmlquery</span> <span class="n">CCSM_BGC</span><span class="p">,</span><span class="n">CLM_CO2_TYPE</span><span class="p">,</span><span class="n">DATM_CO2_TSERIES</span>
<span class="c1"># Expect: CCSM_BGC=CO2A,CLM_CO2_TYPE=diagnostic,DATM_CO2_TSERIES=20tr</span>
<span class="o">&gt;</span> <span class="o">./</span><span class="n">case</span><span class="o">.</span><span class="n">setup</span>

<span class="c1"># Run preview namelist so we have the namelist in CaseDocs</span>
<span class="o">&gt;</span> <span class="o">./</span><span class="n">preview_namelists</span>
</pre></div>
</div>
<p>Once, you’ve done that you can build and run your case normally.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Running-with-anomaly-forcing.html" class="btn btn-neutral float-right" title="1.5.9. Running with anomaly forcing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Running-with-your-own-previous-simulation-as-atmospheric-forcing-to-spinup-the-model.html" class="btn btn-neutral" title="1.5.7. Running with atmospheric forcing from a previous simulation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, UCAR.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
     
<script>var version_json_loc = "../../../../versions.json";</script>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/pop_ver.js"></script>
    

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>