

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.2.3. Customizing CLM’s namelist &#8212; clmdoc release-clm5.0.01 documentation</title>
    
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     'release-clm5.0.01',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1.2.4. Customizing the DATM namelist" href="customizing-the-datm-namelist.html" />
    <link rel="prev" title="1.2.2. Customizing CLM’s Configuration" href="customizing-the-clm-configuration.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="customizing-the-datm-namelist.html" title="1.2.4. Customizing the DATM namelist"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="customizing-the-clm-configuration.html" title="1.2.2. Customizing CLM’s Configuration"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">clmdoc release-clm5.0.01 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >1. clm5.0 User&#8217;s Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">1.2. Setting Up and Running a Case</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1.2.3. Customizing CLM&#8217;s namelist</a><ul>
<li><a class="reference internal" href="#definition-of-namelist-items-and-their-default-values">1.2.3.1. Definition of Namelist items and their default values</a><ul>
<li><a class="reference internal" href="#list-of-fields-that-can-be-added-to-your-output-history-files-by-namelist">1.2.3.1.1. List of fields that can be added to your output history files by namelist</a></li>
<li><a class="reference internal" href="#definition-of-clm-history-variables">1.2.3.1.2. Definition of CLM history variables</a></li>
<li><a class="reference internal" href="#table-1-3-clm-history-fields">1.2.3.1.3. Table 1-3. CLM History Fields</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples-of-using-different-namelist-features">1.2.3.2. Examples of using different namelist features</a><ul>
<li><a class="reference internal" href="#the-default-namelist">1.2.3.2.1. The default namelist</a></li>
<li><a class="reference internal" href="#example-1-2-default-clm-namelist">1.2.3.2.2. Example 1-2. Default CLM Namelist</a></li>
<li><a class="reference internal" href="#adding-removing-fields-on-your-primary-history-file">1.2.3.2.3. Adding/removing fields on your primary history file</a></li>
<li><a class="reference internal" href="#example-1-3-example-user-nl-clm-namelist-adding-and-removing-fields-on-primary-history-file">1.2.3.2.4. Example 1-3. Example user_nl_clm namelist adding and removing fields on primary history file</a></li>
<li><a class="reference internal" href="#adding-auxiliary-history-files-and-changing-output-frequency">1.2.3.2.5. Adding auxiliary history files and changing output frequency</a></li>
<li><a class="reference internal" href="#example-user-nl-clm-namelist-adding-auxiliary-history-files-and-changing-output-frequency">1.2.3.2.6. Example: user_nl_clm namelist adding auxiliary history files and changing output frequency</a></li>
<li><a class="reference internal" href="#removing-all-history-fields">1.2.3.2.7. Removing all history fields</a></li>
<li><a class="reference internal" href="#example-1-5-example-user-nl-clm-namelist-removing-all-history-fields">1.2.3.2.8. Example 1-5. Example user_nl_clm namelist removing all history fields</a></li>
<li><a class="reference internal" href="#various-ways-to-change-history-output-averaging-flags">1.2.3.2.9. Various ways to change history output averaging flags</a></li>
<li><a class="reference internal" href="#example-user-nl-clm-namelist-with-various-ways-to-average-history-fields">1.2.3.2.10. Example: user_nl_clm namelist with various ways to average history fields</a></li>
<li><a class="reference internal" href="#outputting-history-files-as-a-vector-in-order-to-analyze-the-plant-function-types-within-gridcells">1.2.3.2.11. Outputting history files as a vector in order to analyze the plant function types within gridcells</a></li>
<li><a class="reference internal" href="#example-user-nl-clm-namelist-outputting-some-files-in-1d-vector-format">1.2.3.2.12. Example: user_nl_clm namelist outputting some files in 1D Vector format</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="customizing-the-clm-configuration.html"
                        title="previous chapter">1.2.2. Customizing CLM&#8217;s Configuration</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="customizing-the-datm-namelist.html"
                        title="next chapter">1.2.4. Customizing the DATM namelist</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/users_guide/setting-up-and-running-a-case/customizing-the-clm-namelist.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="customizing-a-case"></span><div class="section" id="customizing-clm-s-namelist">
<h1>1.2.3. Customizing CLM&#8217;s namelist<a class="headerlink" href="#customizing-clm-s-namelist" title="Permalink to this headline">¶</a></h1>
<p>Once a case has run <strong>case.setup</strong>, we can then customize the case further, by editing the run-time namelist for CLM. First let&#8217;s list the definition of each namelist item and their valid values, and then we&#8217;ll list the default values for them. Next for some of the most used or tricky namelist items we&#8217;ll give examples of their use, and give you example namelists that highlight these features.</p>
<p>In the following, various examples of namelists are provided that feature the use of different namelist options to customize a case for particular uses.
Most the examples revolve around how to customize the output history fields.
This should give you a good basis for setting up your own CLM namelist.</p>
<div class="section" id="definition-of-namelist-items-and-their-default-values">
<h2>1.2.3.1. Definition of Namelist items and their default values<a class="headerlink" href="#definition-of-namelist-items-and-their-default-values" title="Permalink to this headline">¶</a></h2>
<p>Here we point to you where you can find the definition of each namelist item and separately the default values for them. The default values may change depending on the resolution, land-mask, simulation-year and other attributes. Both of these files are viewable in your web browser, and then expand each in turn.</p>
<ol class="arabic simple">
<li><a class="reference external" href="CLM-URL">Definition of Namelists Relevant for |version|</a></li>
<li><a class="reference external" href="CLM-URL">Default values of each CLM4.0 Namelist Item</a></li>
<li><a class="reference external" href="CLM-URL">Default values of each |version| Namelist Item</a></li>
</ol>
<div class="section" id="list-of-fields-that-can-be-added-to-your-output-history-files-by-namelist">
<h3>1.2.3.1.1. List of fields that can be added to your output history files by namelist<a class="headerlink" href="#list-of-fields-that-can-be-added-to-your-output-history-files-by-namelist" title="Permalink to this headline">¶</a></h3>
<p>One set of the namelist items allows you to add fields to the output history files: <code class="docutils literal"><span class="pre">hist_fincl1</span></code>, <code class="docutils literal"><span class="pre">hist_fincl2</span></code>, <code class="docutils literal"><span class="pre">hist_fincl3</span></code>, <code class="docutils literal"><span class="pre">hist_fincl4</span></code>, <code class="docutils literal"><span class="pre">hist_fincl5</span></code>, and <code class="docutils literal"><span class="pre">hist_fincl6</span></code>. The following links for <a class="reference external" href="CLM-URL">CLM4.0 History Fields</a> and <a class="reference external" href="CLM-URL">|version| History Fields</a> documents all of the history fields available and gives the long-name and units for each. The table below lists all the clm5.0 history fields.</p>
</div>
<div class="section" id="definition-of-clm-history-variables">
<h3>1.2.3.1.2. Definition of CLM history variables<a class="headerlink" href="#definition-of-clm-history-variables" title="Permalink to this headline">¶</a></h3>
<p>Included in the table are the following pieces of information:</p>
<ul class="simple">
<li>Variable name.</li>
<li>Long name description.</li>
<li>units</li>
</ul>
</div>
<div class="section" id="table-1-3-clm-history-fields">
<h3>1.2.3.1.3. Table 1-3. CLM History Fields<a class="headerlink" href="#table-1-3-clm-history-fields" title="Permalink to this headline">¶</a></h3>
<p>Table goes here.</p>
</div>
</div>
<div class="section" id="examples-of-using-different-namelist-features">
<h2>1.2.3.2. Examples of using different namelist features<a class="headerlink" href="#examples-of-using-different-namelist-features" title="Permalink to this headline">¶</a></h2>
<p>Below we will give examples of user namelists that activate different commonly used namelist features. We will discuss the namelist features in different examples and then show a user namelist that includes an example of the use of these features. First we will show the default namelist that doesn&#8217;t activate any user options.</p>
<div class="section" id="the-default-namelist">
<h3>1.2.3.2.1. The default namelist<a class="headerlink" href="#the-default-namelist" title="Permalink to this headline">¶</a></h3>
<p>Here we give the default namelist as it would be created for an &#8220;I1850Clm50BgcCropCru&#8221; compset at 0.9x1.25 resolution with a gx1v7 land-mask on cheyenne. To edit the namelist you would edit the <code class="docutils literal"><span class="pre">user_nl_clm</span></code> user namelist with just the items you want to change. For simplicity we will just show the CLM namelist and NOT the entire file. In the sections below, for simplicity we will just show the user namelist (<code class="docutils literal"><span class="pre">user_nl_clm</span></code>) that will add (or modify existing) namelist items to the namelist.</p>
</div>
<div class="section" id="example-1-2-default-clm-namelist">
<h3>1.2.3.2.2. Example 1-2. Default CLM Namelist<a class="headerlink" href="#example-1-2-default-clm-namelist" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">clm_inparm</span>
 <span class="n">albice</span> <span class="o">=</span> <span class="mf">0.60</span><span class="p">,</span><span class="mf">0.40</span>
 <span class="n">co2_ppmv</span> <span class="o">=</span> <span class="mf">284.7</span>
 <span class="n">co2_type</span> <span class="o">=</span> <span class="s1">&#39;constant&#39;</span>
 <span class="n">create_crop_landunit</span> <span class="o">=</span> <span class="o">.</span><span class="n">false</span><span class="o">.</span>
 <span class="n">dtime</span> <span class="o">=</span> <span class="mi">1800</span>
 <span class="n">fatmlndfrc</span> <span class="o">=</span> <span class="s1">&#39;/glade/p/cesm/cseg/inputdata/share/domains/domain.lnd.fv0.9x1.25_gx1v6.090309.nc&#39;</span>
 <span class="n">finidat</span> <span class="o">=</span> <span class="s1">&#39;$DIN_LOC_ROOT/lnd/clm2/initdata_map/clmi.I1850Clm50BgcCropCru.0241-01-01.0.9x1.25_g1v6_simyr1850_c130531.nc&#39;</span>
 <span class="n">fpftcon</span> <span class="o">=</span> <span class="s1">&#39;/glade/p/cesm/cseg/inputdata/lnd/clm2/pftdata/pft-physiology.c130503.nc&#39;</span>
 <span class="n">fsnowaging</span> <span class="o">=</span> <span class="s1">&#39;/glade/p/cesm/cseg/inputdata/lnd/clm2/snicardata/snicar_drdt_bst_fit_60_c070416.nc&#39;</span>
 <span class="n">fsnowoptics</span> <span class="o">=</span> <span class="s1">&#39;/glade/p/cesm/cseg/inputdata/lnd/clm2/snicardata/snicar_optics_5bnd_c090915.nc&#39;</span>
 <span class="n">fsurdat</span> <span class="o">=</span> <span class="s1">&#39;/glade/p/cesm/cseg/inputdata/lnd/clm2/surfdata_map/surfdata_0.9x1.25_simyr1850_c130415.nc&#39;</span>
 <span class="n">maxpatch_glcmec</span> <span class="o">=</span> <span class="mi">0</span>
 <span class="n">more_vertlayers</span> <span class="o">=</span> <span class="o">.</span><span class="n">false</span><span class="o">.</span>
 <span class="n">nsegspc</span> <span class="o">=</span> <span class="mi">20</span>
 <span class="n">spinup_state</span> <span class="o">=</span> <span class="mi">0</span>
 <span class="n">urban_hac</span> <span class="o">=</span> <span class="s1">&#39;ON&#39;</span>
 <span class="n">urban_traffic</span> <span class="o">=</span> <span class="o">.</span><span class="n">false</span><span class="o">.</span>
<span class="o">/</span>
<span class="o">&amp;</span><span class="n">ndepdyn_nml</span>
 <span class="n">ndepmapalgo</span> <span class="o">=</span> <span class="s1">&#39;bilinear&#39;</span>
 <span class="n">stream_fldfilename_ndep</span> <span class="o">=</span> <span class="s1">&#39;/glade/p/cesm/cseg/inputdata/lnd/clm2/ndepdata/fndep_clm_hist_simyr1849-2006_1.9x2.5_c100428.nc&#39;</span>
 <span class="n">stream_year_first_ndep</span> <span class="o">=</span> <span class="mi">1850</span>
 <span class="n">stream_year_last_ndep</span> <span class="o">=</span> <span class="mi">1850</span>
<span class="o">/</span>
<span class="o">&amp;</span><span class="n">popd_streams</span>
 <span class="n">popdensmapalgo</span> <span class="o">=</span> <span class="s1">&#39;bilinear&#39;</span>
 <span class="n">stream_fldfilename_popdens</span> <span class="o">=</span> <span class="s1">&#39;$DIN_LOC_ROOT/lnd/clm2/firedata/clmforc.Li_2012_hdm_0.5x0.5_AVHRR_simyr1850-2010_c130401.nc&#39;</span>
 <span class="n">stream_year_first_popdens</span> <span class="o">=</span> <span class="mi">1850</span>
 <span class="n">stream_year_last_popdens</span> <span class="o">=</span> <span class="mi">1850</span>
<span class="o">/</span>
<span class="o">&amp;</span><span class="n">light_streams</span>
 <span class="n">lightngmapalgo</span> <span class="o">=</span> <span class="s1">&#39;bilinear&#39;</span>
 <span class="n">stream_fldfilename_lightng</span> <span class="o">=</span> <span class="s1">&#39;/glade/p/cesm/cseg/inputdata/atm/datm7/NASA_LIS/clmforc.Li_2012_climo1995-2011.T62.lnfm_c130327.nc&#39;</span>
 <span class="n">stream_year_first_lightng</span> <span class="o">=</span> <span class="mi">0001</span>
 <span class="n">stream_year_last_lightng</span> <span class="o">=</span> <span class="mi">0001</span>
<span class="o">/</span>
<span class="o">&amp;</span><span class="n">clm_hydrology1_inparm</span>
<span class="o">/</span>
<span class="o">&amp;</span><span class="n">clm_soilhydrology_inparm</span>
<span class="o">/</span>
<span class="o">&amp;</span><span class="n">ch4par_in</span>
 <span class="n">fin_use_fsat</span> <span class="o">=</span> <span class="o">.</span><span class="n">true</span><span class="o">.</span>
<span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-removing-fields-on-your-primary-history-file">
<h3>1.2.3.2.3. Adding/removing fields on your primary history file<a class="headerlink" href="#adding-removing-fields-on-your-primary-history-file" title="Permalink to this headline">¶</a></h3>
<p>The primary history files are output monthly, and contain an extensive list of fieldnames, but the list of fieldnames can be added to using <code class="docutils literal"><span class="pre">hist_fincl1</span></code> or removed from by adding fieldnames to <code class="docutils literal"><span class="pre">hist_fexcl1</span></code>.
A sample user namelist <code class="docutils literal"><span class="pre">user_nl_clm</span></code> adding few new fields (cosine of solar zenith angle, and solar declination) and excluding a few standard fields is (ground temperature, vegetation temperature, soil temperature and soil water).:</p>
</div>
<div class="section" id="example-1-3-example-user-nl-clm-namelist-adding-and-removing-fields-on-primary-history-file">
<h3>1.2.3.2.4. Example 1-3. Example user_nl_clm namelist adding and removing fields on primary history file<a class="headerlink" href="#example-1-3-example-user-nl-clm-namelist-adding-and-removing-fields-on-primary-history-file" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">hist_fincl1</span> <span class="o">=</span> <span class="s1">&#39;COSZEN&#39;</span><span class="p">,</span> <span class="s1">&#39;DECL&#39;</span>
<span class="n">hist_fexcl1</span> <span class="o">=</span> <span class="s1">&#39;TG&#39;</span><span class="p">,</span> <span class="s1">&#39;TV&#39;</span><span class="p">,</span> <span class="s1">&#39;TSOI&#39;</span><span class="p">,</span> <span class="s1">&#39;H2OSOI&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-auxiliary-history-files-and-changing-output-frequency">
<h3>1.2.3.2.5. Adding auxiliary history files and changing output frequency<a class="headerlink" href="#adding-auxiliary-history-files-and-changing-output-frequency" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">hist_fincl2</span></code> through <code class="docutils literal"><span class="pre">hist_fincl6</span></code> set of namelist variables add given history fieldnames to auxiliary history file &#8220;streams&#8221;, and <code class="docutils literal"><span class="pre">hist_fexcl2</span></code> through <code class="docutils literal"><span class="pre">hist_fexcl6</span></code> set of namelist variables remove given history fieldnames from history file auxiliary &#8220;streams&#8221;.
A history &#8220;stream&#8221; is a set of history files that are produced at a given frequency.
By default there is only one stream of monthly data files.
To add more streams you add history fieldnames to <code class="docutils literal"><span class="pre">hist_fincl2</span></code> through <code class="docutils literal"><span class="pre">hist_fincl6</span></code>.
The output frequency and the way averaging is done can be different for each history file stream.
By default the primary history files are monthly and any others are daily. You can have up to six active history streams, but you need to activate them in order. So if you activate stream &#8220;6&#8221; by setting <code class="docutils literal"><span class="pre">hist_fincl6</span></code>, but if any of <code class="docutils literal"><span class="pre">hist_fincl2</span></code> through <code class="docutils literal"><span class="pre">hist_fincl5</span></code> are unset, only the history streams up to the first blank one will be activated.</p>
<p>The frequency of the history file streams is given by the namelist variable <code class="docutils literal"><span class="pre">hist_nhtfrq</span></code> which is an array of rank six for each history stream. The values of the array <code class="docutils literal"><span class="pre">hist_nhtfrq</span></code> must be integers, where the following values have the given meaning:</p>
<p><em>Positive value</em> means the output frequency is the number of model steps between output.
<em>Negative value</em> means the output frequency is the absolute value in hours given (i.e -1 would mean an hour and -24 would mean a full day). Daily (-24) is the default value for all auxiliary files.
<em>Zero</em> means the output frequency is monthly. This is the default for the primary history files.</p>
<p>The number of samples on each history file stream is given by the namelist variable <code class="docutils literal"><span class="pre">hist_mfilt</span></code> which is an array of rank six for each history stream. The values of the array <code class="docutils literal"><span class="pre">hist_mfilt</span></code> must be positive integers. By default the primary history file stream has one time sample on it (i.e. output is to separate monthly files), and all other streams have thirty time samples on them.</p>
<p>A sample user namelist <code class="docutils literal"><span class="pre">user_nl_clm</span></code> turning on four extra file streams for output: daily, six-hourly, hourly, and every time-step, leaving the primary history files as monthly, and changing the number of samples on the streams to: yearly (12), thirty, weekly (28), daily (24), and daily (48) is:</p>
</div>
<div class="section" id="example-user-nl-clm-namelist-adding-auxiliary-history-files-and-changing-output-frequency">
<h3>1.2.3.2.6. Example: user_nl_clm namelist adding auxiliary history files and changing output frequency<a class="headerlink" href="#example-user-nl-clm-namelist-adding-auxiliary-history-files-and-changing-output-frequency" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">hist_fincl2</span> <span class="o">=</span> <span class="s1">&#39;TG&#39;</span><span class="p">,</span> <span class="s1">&#39;TV&#39;</span>
<span class="n">hist_fincl3</span> <span class="o">=</span> <span class="s1">&#39;TG&#39;</span><span class="p">,</span> <span class="s1">&#39;TV&#39;</span>
<span class="n">hist_fincl4</span> <span class="o">=</span> <span class="s1">&#39;TG&#39;</span><span class="p">,</span> <span class="s1">&#39;TV&#39;</span>
<span class="n">hist_fincl5</span> <span class="o">=</span> <span class="s1">&#39;TG&#39;</span><span class="p">,</span> <span class="s1">&#39;TV&#39;</span>
<span class="n">hist_nhtfrq</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">24</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
<span class="n">hist_mfilt</span>  <span class="o">=</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">48</span>
</pre></div>
</div>
</div>
<div class="section" id="removing-all-history-fields">
<h3>1.2.3.2.7. Removing all history fields<a class="headerlink" href="#removing-all-history-fields" title="Permalink to this headline">¶</a></h3>
<p>Sometimes for various reasons you want to remove all the history fields either because you want to do testing without any output, or you only want a very small custom list of output fields rather than the default extensive list of fields.
By default only the primary history files are active, so technically using <code class="docutils literal"><span class="pre">hist_fexcl1</span></code> explained in the first example, you could list ALL of the history fields that are output in <code class="docutils literal"><span class="pre">hist_fexcl1</span></code> and then you wouldn&#8217;t get any output.
However, as the list is very extensive this would be a cumbersome thing to do.
So to facilitate this <code class="docutils literal"><span class="pre">hist_empty_htapes</span></code> allows you to turn off all default output.
You can still use <code class="docutils literal"><span class="pre">hist_fincl1</span></code> to turn your own list of fields on, but you then start from a clean slate.
A sample user namelist <code class="docutils literal"><span class="pre">user_nl_clm</span></code> turning off all history fields and then activating just a few selected fields (ground and vegetation temperatures and absorbed solar radiation) is:</p>
</div>
<div class="section" id="example-1-5-example-user-nl-clm-namelist-removing-all-history-fields">
<h3>1.2.3.2.8. Example 1-5. Example user_nl_clm namelist removing all history fields<a class="headerlink" href="#example-1-5-example-user-nl-clm-namelist-removing-all-history-fields" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">hist_empty_htapes</span> <span class="o">=</span> <span class="o">.</span><span class="n">true</span><span class="o">.</span>
<span class="n">hist_fincl1</span> <span class="o">=</span> <span class="s1">&#39;TG&#39;</span><span class="p">,</span> <span class="s1">&#39;TV&#39;</span><span class="p">,</span> <span class="s1">&#39;FSA&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="various-ways-to-change-history-output-averaging-flags">
<h3>1.2.3.2.9. Various ways to change history output averaging flags<a class="headerlink" href="#various-ways-to-change-history-output-averaging-flags" title="Permalink to this headline">¶</a></h3>
<p>There are two ways to change the averaging of output history fields.
The first is using <code class="docutils literal"><span class="pre">hist_avgflag_pertape</span></code> which gives a default value for each history stream, the second is when you add fields using <code class="docutils literal"><span class="pre">hist_fincl*</span></code>, you add an averaging flag to the end of the field name after a colon (for example &#8216;TSOI:X&#8217;, would output the maximum of TSOI).
The types of averaging that can be done are:</p>
<ul class="simple">
<li><em>A</em> Average, over the output interval.</li>
<li><em>I</em> Instantaneous, output the value at the output interval.</li>
<li><em>X</em> Maximum, over the output interval.</li>
<li><em>M</em> Minimum, over the output interval.</li>
</ul>
<p>The default averaging depends on the specific fields, but for most fields is an average.
A sample user namelist <code class="docutils literal"><span class="pre">user_nl_clm</span></code> making the monthly output fields all averages (except TSOI for the first two streams and FIRE for the 5th stream), and adding auxiliary file streams for instantaneous (6-hourly), maximum (daily), minimum (daily), and average (daily).
For some of the fields we diverge from the per-tape value given and customize to some different type of optimization.</p>
</div>
<div class="section" id="example-user-nl-clm-namelist-with-various-ways-to-average-history-fields">
<h3>1.2.3.2.10. Example: user_nl_clm namelist with various ways to average history fields<a class="headerlink" href="#example-user-nl-clm-namelist-with-various-ways-to-average-history-fields" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">hist_empty_htapes</span> <span class="o">=</span> <span class="o">.</span><span class="n">true</span><span class="o">.</span>
<span class="n">hist_fincl1</span> <span class="o">=</span> <span class="s1">&#39;TSOI:X&#39;</span><span class="p">,</span> <span class="s1">&#39;TG&#39;</span><span class="p">,</span>   <span class="s1">&#39;TV&#39;</span><span class="p">,</span>   <span class="s1">&#39;FIRE&#39;</span><span class="p">,</span>   <span class="s1">&#39;FSR&#39;</span><span class="p">,</span> <span class="s1">&#39;FSH&#39;</span><span class="p">,</span>
              <span class="s1">&#39;EFLX_LH_TOT&#39;</span><span class="p">,</span> <span class="s1">&#39;WT&#39;</span>
<span class="n">hist_fincl2</span> <span class="o">=</span> <span class="s1">&#39;TSOI:X&#39;</span><span class="p">,</span> <span class="s1">&#39;TG&#39;</span><span class="p">,</span>   <span class="s1">&#39;TV&#39;</span><span class="p">,</span>   <span class="s1">&#39;FIRE&#39;</span><span class="p">,</span>   <span class="s1">&#39;FSR&#39;</span><span class="p">,</span> <span class="s1">&#39;FSH&#39;</span><span class="p">,</span>
              <span class="s1">&#39;EFLX_LH_TOT&#39;</span><span class="p">,</span> <span class="s1">&#39;WT&#39;</span>
<span class="n">hist_fincl3</span> <span class="o">=</span> <span class="s1">&#39;TSOI&#39;</span><span class="p">,</span>   <span class="s1">&#39;TG:I&#39;</span><span class="p">,</span> <span class="s1">&#39;TV&#39;</span><span class="p">,</span>   <span class="s1">&#39;FIRE&#39;</span><span class="p">,</span>   <span class="s1">&#39;FSR&#39;</span><span class="p">,</span> <span class="s1">&#39;FSH&#39;</span><span class="p">,</span>
              <span class="s1">&#39;EFLX_LH_TOT&#39;</span><span class="p">,</span> <span class="s1">&#39;WT&#39;</span>
<span class="n">hist_fincl4</span> <span class="o">=</span> <span class="s1">&#39;TSOI&#39;</span><span class="p">,</span>   <span class="s1">&#39;TG&#39;</span><span class="p">,</span>   <span class="s1">&#39;TV:I&#39;</span><span class="p">,</span> <span class="s1">&#39;FIRE&#39;</span><span class="p">,</span>   <span class="s1">&#39;FSR&#39;</span><span class="p">,</span> <span class="s1">&#39;FSH&#39;</span><span class="p">,</span>
              <span class="s1">&#39;EFLX_LH_TOT&#39;</span><span class="p">,</span> <span class="s1">&#39;WT&#39;</span>
<span class="n">hist_fincl5</span> <span class="o">=</span> <span class="s1">&#39;TSOI&#39;</span><span class="p">,</span>   <span class="s1">&#39;TG&#39;</span><span class="p">,</span>   <span class="s1">&#39;TV&#39;</span><span class="p">,</span>   <span class="s1">&#39;FIRE:I&#39;</span><span class="p">,</span> <span class="s1">&#39;FSR&#39;</span><span class="p">,</span> <span class="s1">&#39;FSH&#39;</span><span class="p">,</span>
              <span class="s1">&#39;EFLX_LH_TOT&#39;</span><span class="p">,</span> <span class="s1">&#39;WT&#39;</span>
<span class="n">hist_avgflag_pertape</span> <span class="o">=</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span>   <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span>
<span class="n">hist_nhtfrq</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">24</span><span class="p">,</span> <span class="o">-</span><span class="mi">24</span><span class="p">,</span> <span class="o">-</span><span class="mi">24</span>
</pre></div>
</div>
<p>In the example we put the same list of fields on each of the tapes: soil-temperature, ground temperature, vegetation temperature, emitted longwave radiation, reflected solar radiation, sensible heat, total latent-heat, and total water storage.
We also modify the soil-temperature for the primary and secondary auxiliary tapes by outputting them for a maximum instead of the prescribed per-tape of average and instantaneous respectively.
For the tertiary auxiliary tape we output ground temperature instantaneous instead of as a maximum, and for the fourth auxiliary tape we output vegetation temperature instantaneous instead of as a minimum.
Finally, for the fifth auxiliary tapes we output <code class="docutils literal"><span class="pre">FIRE</span></code> instantaneously instead of as an average.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We also use <code class="docutils literal"><span class="pre">hist_empty_htapes</span></code> as in the previous example, so we can list ONLY the fields that we want on the primary history tapes.</p>
</div>
</div>
<div class="section" id="outputting-history-files-as-a-vector-in-order-to-analyze-the-plant-function-types-within-gridcells">
<h3>1.2.3.2.11. Outputting history files as a vector in order to analyze the plant function types within gridcells<a class="headerlink" href="#outputting-history-files-as-a-vector-in-order-to-analyze-the-plant-function-types-within-gridcells" title="Permalink to this headline">¶</a></h3>
<p>By default the output to history files are the grid-cell average of all land-units, and vegetation types within that grid-cell, and output is on the full 2D latitude/longitude grid with ocean masked out.
Sometimes it&#8217;s important to understand how different land-units or vegetation types are acting within a grid-cell.
The way to do this is to output history files as a 1D-vector of all land-units and vegetation types.
In order to display this, you&#8217;ll need to do extensive post-processing to make sense of the output.
Often you may only be interested in a few points, so once you figure out the 1D indices for the grid-cells of interest, you can easily view that data.
1D vector output can also be useful for single point datasets, since it&#8217;s then obvious that all data is for the same grid cell.</p>
<p>To do this you use <code class="docutils literal"><span class="pre">hist_dov2xy</span></code> which is an array of rank six for each history stream.
Set it to <code class="docutils literal"><span class="pre">.false.</span></code> if you want one of the history streams to be a 1D vector.
You can also use <code class="docutils literal"><span class="pre">hist_type1d_pertape</span></code> if you want to average over all the: Plant-Function-Types, columns, land-units, or grid-cells.
A sample user namelist <code class="docutils literal"><span class="pre">user_nl_clm</span></code> leaving the primary monthly files as 2D, and then doing grid-cell (GRID), column (COLS), and no averaging over auxiliary tapes output daily for a single field (ground temperature) is:</p>
</div>
<div class="section" id="example-user-nl-clm-namelist-outputting-some-files-in-1d-vector-format">
<h3>1.2.3.2.12. Example: user_nl_clm namelist outputting some files in 1D Vector format<a class="headerlink" href="#example-user-nl-clm-namelist-outputting-some-files-in-1d-vector-format" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">hist_fincl2</span> <span class="o">=</span> <span class="s1">&#39;TG&#39;</span>
<span class="n">hist_fincl3</span> <span class="o">=</span> <span class="s1">&#39;TG&#39;</span>
<span class="n">hist_fincl4</span> <span class="o">=</span> <span class="s1">&#39;TG&#39;</span>
<span class="n">hist_fincl5</span> <span class="o">=</span> <span class="s1">&#39;TG&#39;</span>
<span class="n">hist_fincl6</span> <span class="o">=</span> <span class="s1">&#39;TG&#39;</span>
<span class="n">hist_dov2xy</span> <span class="o">=</span> <span class="o">.</span><span class="n">true</span><span class="o">.</span><span class="p">,</span> <span class="o">.</span><span class="n">false</span><span class="o">.</span><span class="p">,</span> <span class="o">.</span><span class="n">false</span><span class="o">.</span><span class="p">,</span> <span class="o">.</span><span class="n">false</span><span class="o">.</span>
<span class="n">hist_type2d_pertape</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;GRID&#39;</span><span class="p">,</span> <span class="s1">&#39;COLS&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span>
<span class="n">hist_nhtfrq</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">24</span><span class="p">,</span> <span class="o">-</span><span class="mi">24</span><span class="p">,</span> <span class="o">-</span><span class="mi">24</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">LAND and COLS are also options to the pertape averaging, but currently there is a bug with them and they fail to work.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Technically the default for hist_nhtfrq is for primary files output monthly and the other auxiliary tapes for daily, so we don&#8217;t actually have to include hist_nhtfrq, we could use the default for it. Here we specify it for clarity.</p>
</div>
<p>Visualizing global 1D vector files will take effort.
You&#8217;ll probably want to do some post-processing and possibly just extract out single points of interest to see what is going on.
Since, the output is a 1D vector, of only land-points traditional plots won&#8217;t be helpful.
The number of points per grid-cell will also vary for anything, but grid-cell averaging.
You&#8217;ll need to use the output fields pfts1d_ixy, and pfts1d_jxy, to get the mapping of the fields to the global 2D array.
pfts1d_itype_veg gives you the PFT number for each PFT.
Most likely you&#8217;ll want to do this analysis in a data processing tool (such as NCL, Matlab, Mathmatica, IDL, etcetera that is able to read and process NetCDF data files).</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="customizing-the-datm-namelist.html" title="1.2.4. Customizing the DATM namelist"
             >next</a> |</li>
        <li class="right" >
          <a href="customizing-the-clm-configuration.html" title="1.2.2. Customizing CLM’s Configuration"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">clmdoc release-clm5.0.01 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >1. clm5.0 User&#8217;s Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >1.2. Setting Up and Running a Case</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Erik Kluzek, Bill Sacks, Ben Andre.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.
    </div>
  </body>
</html>