

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7.1. What is PTCLM &#8212; clmdoc  documentation</title>
    
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="7.3. Using PTCLM" href="using-ptclm.html" />
    <link rel="prev" title="7. Running PTCLM" href="index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="using-ptclm.html" title="7.3. Using PTCLM"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="7. Running PTCLM"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">clmdoc  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >CLM User&#8217;s Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">7. Running PTCLM</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.1. What is PTCLM</a></li>
<li><a class="reference internal" href="#details-of-ptclm">7.2. Details of PTCLM</a><ul>
<li><a class="reference internal" href="#example-6-1-example-of-running-ptclm1-for-us-umb-on-yellowstone">7.2.1. Example 6-1. Example of running PTCLM1 for US-UMB on yellowstone</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">7. Running PTCLM</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="using-ptclm.html"
                        title="next chapter">7.3. Using PTCLM</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/users_guide/running-PTCLM/introduction-to-ptclm.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="what-is-ptclm">
<span id="introduction-to-ptclm-rst"></span><span id="id1"></span><h1>7.1. What is PTCLM<a class="headerlink" href="#what-is-ptclm" title="Permalink to this headline">¶</a></h1>
<p>PTCLM (pronounced either as point clime or Pee-Tee clime) is a Python script to help you set up PoinT CLM simulations.</p>
<p>It runs the CLM tools for you to get datasets set up, and copies them to a location you can use them according to the <code class="docutils literal"><span class="pre">CLM_USRDAT_NAME</span></code> naming convention.</p>
<p>Then it runs <strong>create_newcase</strong> for you and modifies the env settings and namelist appropriately.</p>
<p>PTCLM has a simple ASCII text file for storing basic information for your sites.</p>
<p>We also have complete lists for AmeriFlux and Fluxnet-Canada sites, although we only have the meteorology data for one site.</p>
<p>For other sites you will need to obtain the meteorology data and translate it to a format that the CESM datm model can use.</p>
<p>But, even without meteorology data PTCLM is useful to setup datasets to run with standard <code class="docutils literal"><span class="pre">CLM_QIAN</span></code> data.</p>
<p>The original authors of PTCLM are: Daniel M. Ricciuto, Dali Wang, Peter E. Thornton, Wilfred M. Post all at Environmental Sciences Division, Oak Ridge National Laboratory (ORNL) and R. Quinn Thomas at Cornell University. It was then modified fairly extensively by Erik Kluzek at NCAR. We want to thank all of these individuals for this contribution to the CESM effort. We also want to thank the folks at University of Michigan Biological Stations (US-UMB) who allowed us to use their Fluxnet station data and import it into our inputdata repository, especially Gil Bohrer the PI on record for this site.</p>
</div>
<div class="section" id="details-of-ptclm">
<span id="id2"></span><h1>7.2. Details of PTCLM<a class="headerlink" href="#details-of-ptclm" title="Permalink to this headline">¶</a></h1>
<p>To get help on PTCLM1.110726 use the &#8220;&#8211;help&#8221; option as follows.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">cd</span> <span class="n">scripts</span><span class="o">/</span><span class="n">ccsm_utils</span><span class="o">/</span><span class="n">Tools</span><span class="o">/</span><span class="n">lnd</span><span class="o">/</span><span class="n">clm</span><span class="o">/</span><span class="n">PTCLM</span>
<span class="o">&gt;</span> <span class="o">./</span><span class="n">PTCLM</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>The output to the above command is as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> Usage: PTCLM.py [options] -d inputdatadir -m machine -s sitename

 Python script to create cases to run single point simulations with tower site data.

 Options:
    --version             show program&#39;s version number and exit
    -h, --help            show this help message and exit

Required Options:
  -d CCSM_INPUT, --csmdata=CCSM_INPUT
                      Location of CCSM input data
  -m MYMACHINE, --machine=MYMACHINE
                      Machine, valid CESM script machine (-m list to list valid
                      machines)
  -s MYSITE, --site=MYSITE
                      Site-code to run, FLUXNET code or CLM1PT name (-s list to list
                      valid names)

Configure and Run Options:
  -c MYCOMPSET, --compset=MYCOMPSET
                      Compset for CCSM simulation (Must be a valid &#39;I&#39; compset [other
                      than IG compsets], use -c list to list valid compsets)
  --coldstart         Do a coldstart with arbitrary initial conditions
  --caseidprefix=MYCASEID
                      Unique identifier to include as a prefix to the case name
  --cesm_root=BASE_CESM
                      Root CESM directory (top level directory with models and scripts
                      subdirs)
  --debug             Flag to turn on debug mode so won&#39;t run, but display what would
                      happen
  --finidat=FINIDAT   Name of finidat initial conditions file to start CLM from
  --list              List all valid: sites, compsets, and machines
  --namelist=NAMELIST
                      List of namelist items to add to CLM namelist (example:
                      --namelist=&quot;hist_fincl1=&#39;TG&#39;,hist_nhtfrq=-1&quot;
  --QIAN_tower_yrs    Use the QIAN forcing data year that correspond to the tower
                      years
  --rmold             Remove the old case directory before starting
  --run_n=MYRUN_N     Number of time units to run simulation
  --run_units=MYRUN_UNITS
                      Time units to run simulation (steps,days,years, etc.)
  --quiet             Print minimul information on what the script is doing
  --sitegroupname=SITEGROUP
                      Name of the group of sites to search for you selected site in
                      (look for prefix group names in the PTCLM_sitedata directory)
  --stdurbpt          If you want to setup for standard urban namelist settings
  --useQIAN           use QIAN input forcing data instead of tower site meterology data
  --verbose           Print out extra information on what the script is doing

Input data generation options:
  These are options having to do with generation of input datasets.  Note: When
  running for supported CLM1PT single-point datasets you can NOT generate new
  datasets.  For supported CLM1PT single-point datasets, you MUST run with the
  following settings: --nopointdata And you must NOT set any of these: --soilgrid
  --pftgrid --owritesrf

  --nopointdata       Do NOT make point data (use data already created)
  --owritesrf         Overwrite the existing surface datasets if they exist (normally
                      do NOT recreate them)
  --pftgrid           Use pft information from global gridded file (rather than site
                      data)
  --soilgrid          Use soil information from global gridded file (rather than site
                      data)

Main Script Version Id: $Id: PTCLM.py 47576 2013-05-29 19:11:16Z erik $ Scripts URL: $HeadURL: https://svn-ccsm-models.cgd.ucar.edu/PTCLM/trunk_tags/PTCLM1_130529/PTCLM.py $:
</pre></div>
</div>
<p>Here we give a simple example of using PTCLM1 for a straightforward case of running at the US-UMB Fluxnet site on yellowstone where we already have the meteorology data on the machine.
Note, see <a class="reference external" href="CLM-URL">the Section called Converting AmeriFlux Data for use by PTCLM</a> for permission information to use this data.</p>
<div class="section" id="example-6-1-example-of-running-ptclm1-for-us-umb-on-yellowstone">
<h2>7.2.1. Example 6-1. Example of running PTCLM1 for US-UMB on yellowstone<a class="headerlink" href="#example-6-1-example-of-running-ptclm1-for-us-umb-on-yellowstone" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span>&gt; setenv CSMDATA   $CESMDATAROOT/inputdata
&gt; setenv MYCSMDATA $HOME/inputdata
&gt; setenv SITE      US-UMB
&gt; setenv MYMACH    yellowstone_intel
&gt; setenv MYCASE    testPTCLM
# First link the standard input files to a location you have write access
&gt; cd scripts
&gt; ./link_dirtree $CSMDATA $MYCSMDATA

# Next build all of the clm tools you will need
&gt; cd ../models/lnd/clm/tools/clm4_5/mksurfdata_map
&gt; gmake
&gt; gmake clean
&gt; cd ../../../../../../tools/mapping/gen_domain_files/src
&gt; ../../../../scripts/ccsm_utils/Machines/configure -mach yellowstone -compiler intel
&gt; gmake
&gt; gmake clean
# next run PTCLM (NOTE -- MAKE SURE python IS IN YOUR PATH)
&gt; cd ../../../../../scripts/ccsm_utils/Tools/lnd/clm/PTCLM
&gt; ./PTCLM.py -m $MYMACH  --case=$MYCASE --site=$SITE --csmdata=$MYCSMDATA --aerdepgrid --ndepgrid
# NOTE: we use --aerdepgrid --ndepgrid so that you use the global
# aerosol and Nitrogen deposition files rather than site-specific ones.
&gt; cd ../../../../../$MYCASE
# Finally setup, build, and run the case as normal
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="using-ptclm.html" title="7.3. Using PTCLM"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="7. Running PTCLM"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">clmdoc  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >CLM User&#8217;s Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >7. Running PTCLM</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Erik Kluzek, Bill Sacks, Ben Andre.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.4.
    </div>
  </body>
</html>