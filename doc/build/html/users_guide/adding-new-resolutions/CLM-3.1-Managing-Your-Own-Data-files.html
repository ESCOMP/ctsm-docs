

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>1.4.2. Managing Your Data Own Files &#8212; clmdoc  documentation</title>
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1.4.3. Adding Resolution Names" href="CLM-3.2-Adding-Resolution-Names.html" />
    <link rel="prev" title="1.4.1. Adding New Resolutions" href="CLM-3.0-Adding-New-Resolutions-or-New-Files-to-the-build-namelist-Database.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="CLM-3.2-Adding-Resolution-Names.html" title="1.4.3. Adding Resolution Names"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="CLM-3.0-Adding-New-Resolutions-or-New-Files-to-the-build-namelist-Database.html" title="1.4.1. Adding New Resolutions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">clmdoc  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >1. CLM User’s Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">1.4. Adding New Resolutions</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="CLM-3.0-Adding-New-Resolutions-or-New-Files-to-the-build-namelist-Database.html"
                        title="previous chapter">1.4.1. Adding New Resolutions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="CLM-3.2-Adding-Resolution-Names.html"
                        title="next chapter">1.4.3. Adding Resolution Names</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/users_guide/adding-new-resolutions/CLM-3.1-Managing-Your-Own-Data-files.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="managing-your-data-own-files">
<span id="managing-your-data-files"></span><h1>1.4.2. Managing Your Data Own Files<a class="headerlink" href="#managing-your-data-own-files" title="Permalink to this headline">¶</a></h1>
<p>If you are running on a supported machine (such as yellowstone or hopper) the standard input datasets will already be available and you won’t have to check them out of the subversion inputdata server. However, you also will NOT be able to add your own datafiles to these standard inputdata directories – because most likely you won’t have permissions to do so. In order to add files to the XML database or to use <code class="docutils literal"><span class="pre">CLM_USRDAT_NAME</span></code> you need to put data in the standard locations so that they can be found. The recommended way to do this is to use the <strong>link_dirtree</strong> tool in the CESM scripts. Some information on <strong>link_dirtree</strong> is available in the <a class="reference external" href="CLM-URL">CESM1.2.0 Scripts User’s Guide</a>. We also have some examples of it’s use here and in other sections of this User’s Guide.</p>
<p>Using <strong>link_dirtree</strong> is quite simple, you give the directory where data exists and then the directory that you want to create where datasets will point to the original source files. In the example below we use “$HOME/inputdata”, but MYCSMDATA could be any directory you have access to where you want to put your data.</p>
<p><code class="docutils literal"><span class="pre">`</span>
<span class="pre">&gt;</span> <span class="pre">cd</span> <span class="pre">scripts</span>
<span class="pre">#</span> <span class="pre">First</span> <span class="pre">make</span> <span class="pre">sure</span> <span class="pre">you</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">inputdata</span> <span class="pre">location</span> <span class="pre">that</span> <span class="pre">you</span> <span class="pre">can</span> <span class="pre">write</span> <span class="pre">to</span>
<span class="pre">#</span> <span class="pre">You</span> <span class="pre">only</span> <span class="pre">need</span> <span class="pre">to</span> <span class="pre">do</span> <span class="pre">this</span> <span class="pre">step</span> <span class="pre">once,</span> <span class="pre">so</span> <span class="pre">you</span> <span class="pre">won't</span> <span class="pre">need</span> <span class="pre">to</span> <span class="pre">do</span> <span class="pre">this</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">future</span>
<span class="pre">#</span> <span class="pre">(except</span> <span class="pre">to</span> <span class="pre">bring</span> <span class="pre">in</span> <span class="pre">any</span> <span class="pre">updated</span> <span class="pre">files</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">original</span> <span class="pre">$CSMDATA</span> <span class="pre">location).</span>
<span class="pre">&gt;</span> <span class="pre">setenv</span> <span class="pre">MYCSMDATA</span> <span class="pre">$HOME/inputdata</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Set</span> <span class="pre">env</span> <span class="pre">var</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">directory</span> <span class="pre">for</span> <span class="pre">input</span> <span class="pre">data</span>
<span class="pre">&gt;</span> <span class="pre">./link_dirtree</span> <span class="pre">$CSMDATA</span> <span class="pre">$MYCSMDATA</span>
<span class="pre">`</span></code></p>
<p>Then when you create a case you will change <code class="docutils literal"><span class="pre">DIN_LOC_ROOT_CSMDATA</span></code> to point to the location you linked to rather than the default location.</p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">./xmlchange</span> <span class="pre">DIN_LOC_ROOT_CSMDATA=$MYCSMDATA</span></code></p>
<p>In order to list the files that you have created you merely need to use the UNIX command find to find the files that are NOT softlinks. So for example executing the following command:</p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">find</span> <span class="pre">$MYCSMDATA</span> <span class="pre">-type</span> <span class="pre">f</span> <span class="pre">-print</span></code></p>
<p>for me gives the following truncated list of CLM_USRDAT_NAME files that I have created.</p>
<p><code class="docutils literal"><span class="pre">`</span>
<span class="pre">/glade/p/work/erik/inputdata/lnd/clm2/pftdata/pft-physiology.c130503.nc</span>
<span class="pre">/glade/p/work/erik/inputdata/atm/datm7/CLM1PT_data/1x1pt_BE-Vie/1997-01.nc</span>
<span class="pre">/glade/p/work/erik/inputdata/atm/datm7/CLM1PT_data/1x1pt_BE-Vie/1997-02.nc</span>
<span class="pre">/glade/p/work/erik/inputdata/atm/datm7/CLM1PT_data/1x1pt_BE-Vie/1997-03.nc</span>
<span class="pre">/glade/p/work/erik/inputdata/atm/datm7/CLM1PT_data/1x1pt_BE-Vie/1997-04.nc</span>
<span class="pre">`</span></code></p>
<p>You can also use <strong>find</strong> to list files that have a particular pattern in the name as well (using the -name option with wildcards). Also you can always rerun the <strong>link_dirtree</strong> command if any new files are added that you need to be linked into your directory tree. Since, the files are soft-links – it doesn’t take up much space other than the files that you add there. This way all of the files are kept in one place, they are organized by usage according to CESM standards, and you can easily find your own files, and CLM can find them as well.</p>
<p>If you are running on a supported machine (such as yellowstone or hopper) the standard input datasets will already be available and you won’t have to check them out of the subversion inputdata server. However, you also will NOT be able to add your own datafiles to these standard inputdata directories – because most likely you won’t have permissions to do so. In order to add files to the XML database or to use <code class="docutils literal"><span class="pre">CLM_USRDAT_NAME</span></code> you need to put data in the standard locations so that they can be found. The recommended way to do this is to use the <strong>link_dirtree</strong> tool in the CESM scripts. Some information on <strong>link_dirtree</strong> is available in the <a class="reference external" href="CLM-URL">CESM1.2.0 Scripts User’s Guide</a>. We also have some examples of it’s use here and in other sections of this User’s Guide.</p>
<p>Using <strong>link_dirtree</strong> is quite simple, you give the directory where data exists and then the directory that you want to create where datasets will point to the original source files. In the example below we use “$HOME/inputdata”, but MYCSMDATA could be any directory you have access to where you want to put your data.</p>
<p><code class="docutils literal"><span class="pre">`</span>
<span class="pre">&gt;</span> <span class="pre">cd</span> <span class="pre">scripts</span>
<span class="pre">#</span> <span class="pre">First</span> <span class="pre">make</span> <span class="pre">sure</span> <span class="pre">you</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">inputdata</span> <span class="pre">location</span> <span class="pre">that</span> <span class="pre">you</span> <span class="pre">can</span> <span class="pre">write</span> <span class="pre">to</span>
<span class="pre">#</span> <span class="pre">You</span> <span class="pre">only</span> <span class="pre">need</span> <span class="pre">to</span> <span class="pre">do</span> <span class="pre">this</span> <span class="pre">step</span> <span class="pre">once,</span> <span class="pre">so</span> <span class="pre">you</span> <span class="pre">won't</span> <span class="pre">need</span> <span class="pre">to</span> <span class="pre">do</span> <span class="pre">this</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">future</span>
<span class="pre">#</span> <span class="pre">(except</span> <span class="pre">to</span> <span class="pre">bring</span> <span class="pre">in</span> <span class="pre">any</span> <span class="pre">updated</span> <span class="pre">files</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">original</span> <span class="pre">$CSMDATA</span> <span class="pre">location).</span>
<span class="pre">&gt;</span> <span class="pre">setenv</span> <span class="pre">MYCSMDATA</span> <span class="pre">$HOME/inputdata</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Set</span> <span class="pre">env</span> <span class="pre">var</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">directory</span> <span class="pre">for</span> <span class="pre">input</span> <span class="pre">data</span>
<span class="pre">&gt;</span> <span class="pre">./link_dirtree</span> <span class="pre">$CSMDATA</span> <span class="pre">$MYCSMDATA</span>
<span class="pre">`</span></code></p>
<p>Then when you create a case you will change <code class="docutils literal"><span class="pre">DIN_LOC_ROOT_CSMDATA</span></code> to point to the location you linked to rather than the default location.</p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">./xmlchange</span> <span class="pre">DIN_LOC_ROOT_CSMDATA=$MYCSMDATA</span></code></p>
<p>In order to list the files that you have created you merely need to use the UNIX command find to find the files that are NOT softlinks. So for example executing the following command:</p>
<p><code class="docutils literal"><span class="pre">&gt;</span> <span class="pre">find</span> <span class="pre">$MYCSMDATA</span> <span class="pre">-type</span> <span class="pre">f</span> <span class="pre">-print</span></code></p>
<p>for me gives the following truncated list of CLM_USRDAT_NAME files that I have created.</p>
<p><code class="docutils literal"><span class="pre">`</span>
<span class="pre">/glade/p/work/erik/inputdata/lnd/clm2/pftdata/pft-physiology.c130503.nc</span>
<span class="pre">/glade/p/work/erik/inputdata/atm/datm7/CLM1PT_data/1x1pt_BE-Vie/1997-01.nc</span>
<span class="pre">/glade/p/work/erik/inputdata/atm/datm7/CLM1PT_data/1x1pt_BE-Vie/1997-02.nc</span>
<span class="pre">/glade/p/work/erik/inputdata/atm/datm7/CLM1PT_data/1x1pt_BE-Vie/1997-03.nc</span>
<span class="pre">/glade/p/work/erik/inputdata/atm/datm7/CLM1PT_data/1x1pt_BE-Vie/1997-04.nc</span>
<span class="pre">`</span></code></p>
<p>You can also use <strong>find</strong> to list files that have a particular pattern in the name as well (using the -name option with wildcards). Also you can always rerun the <strong>link_dirtree</strong> command if any new files are added that you need to be linked into your directory tree. Since, the files are soft-links – it doesn’t take up much space other than the files that you add there. This way all of the files are kept in one place, they are organized by usage according to CESM standards, and you can easily find your own files, and CLM can find them as well.</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="CLM-3.2-Adding-Resolution-Names.html" title="1.4.3. Adding Resolution Names"
             >next</a> |</li>
        <li class="right" >
          <a href="CLM-3.0-Adding-New-Resolutions-or-New-Files-to-the-build-namelist-Database.html" title="1.4.1. Adding New Resolutions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">clmdoc  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >1. CLM User’s Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >1.4. Adding New Resolutions</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Erik Kluzek, Bill Sacks, Ben Andre.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>