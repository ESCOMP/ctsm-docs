

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>1.6.2. Running a single point using global data - PTS_MODE &#8212; clmdoc  documentation</title>
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1.6.3. Running Single Point Configurations" href="running-single-point-configurations.html" />
    <link rel="prev" title="1.6.1. Single and Regional Grid Configurations" href="single-point-and-regional-grid-configurations.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="running-single-point-configurations.html" title="1.6.3. Running Single Point Configurations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="single-point-and-regional-grid-configurations.html" title="1.6.1. Single and Regional Grid Configurations"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">clmdoc  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >1. CLM User’s Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">1.6. Running Single Point Regional Cases</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1.6.2. Running a single point using global data - PTS_MODE</a><ul>
<li><a class="reference internal" href="#running-on-in-a-single-processor">1.6.2.1. Running on in a single processor</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="single-point-and-regional-grid-configurations.html"
                        title="previous chapter">1.6.1. Single and Regional Grid Configurations</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="running-single-point-configurations.html"
                        title="next chapter">1.6.3. Running Single Point Configurations</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/users_guide/running-single-points/running-pts_mode-configurations.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="running-a-single-point-using-global-data-pts-mode">
<span id="pts-mode"></span><h1>1.6.2. Running a single point using global data - PTS_MODE<a class="headerlink" href="#running-a-single-point-using-global-data-pts-mode" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal"><span class="pre">PTS_MODE</span></code> enables you to run the model using global datasets, but just picking a single point from those datasets and operating on it.
It can be a very quick way to do fast simulations and get a quick turnaround.</p>
<p>To setup a <code class="docutils literal"><span class="pre">PTS_MODE</span></code> simulation you use the “-pts_lat” and “-pts_lon” arguments to <strong>create_newcase</strong> to give the latitude and longitude of the point you want to simulate for (the code will pick the point on the global grid nearest to the point you give. Here’s an example to setup a simulation for the nearest point at 2-degree resolution to Boulder Colorado.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">cd</span> <span class="n">scripts</span>
<span class="o">&gt;</span> <span class="o">./</span><span class="n">create_newcase</span> <span class="o">-</span><span class="n">case</span> <span class="n">testPTS_MODE</span> <span class="o">-</span><span class="n">res</span> <span class="n">f19_g16</span> <span class="o">-</span><span class="n">compset</span> <span class="n">I1850CRUCLM45BGC</span> <span class="o">-</span><span class="n">pts_lat</span> <span class="mf">40.0</span> <span class="o">-</span><span class="n">pts_lon</span> <span class="o">-</span><span class="mi">105</span>
<span class="o">&gt;</span> <span class="n">cd</span> <span class="n">testPTS_MODE</span>

<span class="c1"># We make sure the model will start up cold rather than using initial conditions</span>
<span class="o">&gt;</span> <span class="o">./</span><span class="n">xmlchange</span> <span class="n">CLM_FORCE_COLDSTART</span><span class="o">=</span><span class="n">on</span><span class="p">,</span><span class="n">RUN_TYPE</span><span class="o">=</span><span class="n">startup</span>
</pre></div>
</div>
<p>Then setup, build and run as normal. We make sure initial conditions are NOT used since <code class="docutils literal"><span class="pre">PTS_MODE</span></code> currently CAN NOT run with initial conditions.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">By default it sets up to run with MPILIB=mpi-serial (in the env_build.xml file) turned on, which allows you to run the model interactively. On some machines this mode is NOT supported and you may need to change it to FALSE before you are able to build.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><code class="docutils literal"><span class="pre">PTS_MODE</span></code> currently does NOT restart nor is it able to startup from global initial condition files. See bugs “1017 and 1025” in the <a class="reference external" href="CLM-URL">models/lnd/clm/doc/KnownLimitationss</a> file.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can change the point you are simulating for at run-time by changing the values of <code class="docutils literal"><span class="pre">PTS_LAT</span></code> and <code class="docutils literal"><span class="pre">PTS_LON</span></code> in the <code class="docutils literal"><span class="pre">env_run.xml</span></code> file.</p>
</div>
<div class="section" id="running-on-in-a-single-processor">
<h2>1.6.2.1. Running on in a single processor<a class="headerlink" href="#running-on-in-a-single-processor" title="Permalink to this headline">¶</a></h2>
<p>Note, that when running with <code class="docutils literal"><span class="pre">PTS_MODE</span></code> the number of processors is automatically set to one.
When running a single grid point you can only use a single processor.
You might also want to set the <code class="docutils literal"><span class="pre">env_build.xml</span></code> variable: <code class="docutils literal"><span class="pre">MPILIB=mpi-serial</span></code> to <code class="docutils literal"><span class="pre">TRUE</span></code> so that you can also run interactively without having to use MPI to start up your job.</p>
<p>On many machines, batch queues have a minimum number of nodes or processors that can be used.
On these machines you may have to change the queue and possibly the time-limits of the job, to get it to run in the batch queue.
On the NCAR machine, yellowstone, this is done for you automatically, and the “caldera” queue is used for such single-processor simulations.
Another way to get around this problem is to run the job interactively using <code class="docutils literal"><span class="pre">MPILIB=mpi-serial</span></code> so that you don’t submit the job to the batch queue.
For single point mode you also may want to consider using a smaller workstation or cluster, rather than a super-computer, because you can’t take advantage of the multi-processing power of the super-computer anyway.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="running-single-point-configurations.html" title="1.6.3. Running Single Point Configurations"
             >next</a> |</li>
        <li class="right" >
          <a href="single-point-and-regional-grid-configurations.html" title="1.6.1. Single and Regional Grid Configurations"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">clmdoc  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >1. CLM User’s Guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >1.6. Running Single Point Regional Cases</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Erik Kluzek, Bill Sacks, Ben Andre.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.
    </div>
  </body>
</html>