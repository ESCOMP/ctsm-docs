

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>31. Offline Mode &#8212; clmdoc  documentation</title>
    
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="32. References" href="../References/CLM50_Tech_Note_References.html" />
    <link rel="prev" title="30. Carbon Isotopes" href="../Isotopes/CLM50_Tech_Note_Isotopes.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../References/CLM50_Tech_Note_References.html" title="32. References"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../Isotopes/CLM50_Tech_Note_Isotopes.html" title="30. Carbon Isotopes"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">clmdoc  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">CLM Technical Note</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../Isotopes/CLM50_Tech_Note_Isotopes.html"
                        title="previous chapter">30. Carbon Isotopes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../References/CLM50_Tech_Note_References.html"
                        title="next chapter">32. References</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/tech_note/Offline/CLM50_Tech_Note_Offline.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="offline-mode">
<span id="rst-offline-mode"></span><h1>31. Offline Mode<a class="headerlink" href="#offline-mode" title="Permalink to this headline">¶</a></h1>
<p>In offline mode (uncoupled to an atmospheric model), the atmospheric
forcing required by CLM (<a class="reference internal" href="../Ecosystem/CLM50_Tech_Note_Ecosystem.html#table-atmospheric-input-to-land-model"><span class="std std-numref">Table 2.4</span></a>)
is supplied by observed datasets.  The standard forcing provided with the
model is a 110-year (1901-2010) dataset (CRUNCEP; <a class="reference internal" href="../References/CLM50_Tech_Note_References.html#viovy2011"><span class="std std-ref">Viovy 2011</span></a>)
that is a combination of two existing datasets; the CRU TS3.2 0.5<span class="math">{}^\circ</span> X 0.5<span class="math">{}^\circ</span> monthly data covering the period
1901 to 2002 (<a class="reference internal" href="../References/CLM50_Tech_Note_References.html#mitchelljones2005"><span class="std std-ref">Mitchell and Jones 2005</span></a>)
and the NCEP reanalysis 2.5<span class="math">{}^\circ</span> X 2.5<span class="math">{}^\circ</span>
6-hourly data covering the period 1948 to 2010. The CRUNCEP dataset has
been used to force CLM for studies of vegetation growth,
evapotranspiration, and gross primary production (<a class="reference internal" href="../References/CLM50_Tech_Note_References.html#maoetal2012"><span class="std std-ref">Mao et al. 2012</span></a>,
<a class="reference internal" href="../References/CLM50_Tech_Note_References.html#maoetal2013"><span class="std std-ref">Mao et al. 2013</span></a>, <a class="reference internal" href="../References/CLM50_Tech_Note_References.html#shietal2013"><span class="std std-ref">Shi et al. 2013</span></a>)
and for the TRENDY (trends in net land-atmosphere carbon exchange over the period
1980-2010) project (<a class="reference internal" href="../References/CLM50_Tech_Note_References.html#piaoetal2012"><span class="std std-ref">Piao et al. 2012</span></a>). Version 4 is used
here (<a class="reference internal" href="../References/CLM50_Tech_Note_References.html#viovy2011"><span class="std std-ref">Viovy 2011</span></a>). Alternative forcing datasets can also be used
(e.g., the <a class="reference internal" href="../References/CLM50_Tech_Note_References.html#qianetal2006"><span class="std std-ref">Qian et al. (2006)</span></a> dataset used for
previous versions of CLM is still available).</p>
<p>Here, the CRUNCEP dataset, which does not include data over oceans,
lakes, and Antarctica is modified. This missing data is filled with
<a class="reference internal" href="../References/CLM50_Tech_Note_References.html#qianetal2006"><span class="std std-ref">Qian et al. (2006)</span></a> data from 1948 that is interpolated by the data atmosphere
model to the 0.5<span class="math">{}^\circ</span> CRUNCEP grid. This allows the model
to be run over Antarctica and ensures data is available along coastlines
regardless of model resolution.</p>
<p>The forcing data is ingested into a data atmosphere model in three
“streams”; precipitation (<span class="math">P</span>) (mm s<sup>-1</sup>), solar
radiation (<span class="math">S_{atm}</span> ) (W m<sup>-2</sup>), and four other
fields [atmospheric pressure <span class="math">P_{atm}</span>  (Pa), atmospheric specific
humidity <span class="math">q_{atm}</span>  (kg kg<sup>-1</sup>), atmospheric
temperature <span class="math">T_{atm}</span>  (K), and atmospheric wind <span class="math">W_{atm}</span>
(m s<sup>-1</sup>)]. These are separate streams because they are
handled differently according to the type of field. In the CRUNCEP
dataset, the precipitation stream is provided at six hour intervals and
the data atmosphere model prescribes the same precipitation rate for
each model time step within the six hour period. The four fields that
are grouped together in another stream (pressure, humidity, temperature,
and wind) are provided at six hour intervals and the data atmosphere
model linearly interpolates these fields to the time step of the model.</p>
<p>The total solar radiation is also provided at six hour intervals. The
data is fit to the model time step using a diurnal function that depends
on the cosine of the solar zenith angle <span class="math">\mu</span>  to provide a
smoother diurnal cycle of solar radiation and to ensure that all of the
solar radiation supplied by the six-hourly forcing data is actually
used. The solar radiation at model time step <span class="math">t_{M}</span>  is</p>
<div class="math" id="equation-ZEqnNum160435">
<p><span class="eqno">(1)<a class="headerlink" href="#equation-ZEqnNum160435" title="Permalink to this equation">¶</a></span><span class="math">\begin{array}{l} {S_{atm} \left(t_{M} \right)=\frac{\frac{\Delta t_{FD} }{\Delta t_{M} } S_{atm} \left(t_{FD} \right)\mu \left(t_{M} \right)}{\sum _{i=1}^{\frac{\Delta t_{FD} }{\Delta t_{M} } }\mu \left(t_{M_{i} } \right) } \qquad {\rm for\; }\mu \left(t_{M} \right)&gt;0.001} \\ {S_{atm} \left(t_{M} \right)=0\qquad {\rm for\; }\mu \left(t_{M} \right)\le 0.001} \end{array}</span></p>
</div><p>where <span class="math">\Delta t_{FD}</span>  is the time step of the forcing data (6
hours <span class="math">\times</span>  3600 seconds hour<sup>-1</sup> = 21600
seconds), <span class="math">\Delta t_{M}</span>  is the model time step (seconds),
<span class="math">S_{atm} \left(t_{FD} \right)</span> is the six-hourly solar radiation
from the forcing data (W m<sup>-2</sup>), and
<span class="math">\mu \left(t_{M} \right)</span> is the cosine of the solar zenith angle
at model time step <span class="math">t_{M}</span>  (section 3.3). The term in the
denominator of equation is the sum of the cosine of the solar zenith
angle for each model time step falling within the six hour period. For
numerical purposes, <span class="math">\mu \left(t_{M_{i} } \right)\ge 0.001</span>.</p>
<p>The total incident solar radiation <span class="math">S_{atm}</span>  at the model time
step <span class="math">t_{M}</span>  is then split into near-infrared and visible
radiation and partitioned into direct and diffuse according to factors
derived from one year’s worth of hourly CAM output from CAM version
cam3_5_55 as</p>
<div class="math" id="equation-31.2)">
<p><span class="eqno">(2)<a class="headerlink" href="#equation-31.2)" title="Permalink to this equation">¶</a></span><span class="math">S_{atm} \, \downarrow _{vis}^{\mu } =R_{vis} \left(\alpha S_{atm} \right)</span></p>
</div><div class="math" id="equation-31.3)">
<p><span class="eqno">(3)<a class="headerlink" href="#equation-31.3)" title="Permalink to this equation">¶</a></span><span class="math">S_{atm} \, \downarrow _{nir}^{\mu } =R_{nir} \left[\left(1-\alpha \right)S_{atm} \right]</span></p>
</div><div class="math" id="equation-31.4)">
<p><span class="eqno">(4)<a class="headerlink" href="#equation-31.4)" title="Permalink to this equation">¶</a></span><span class="math">S_{atm} \, \downarrow _{vis} =\left(1-R_{vis} \right)\left(\alpha S_{atm} \right)</span></p>
</div><div class="math" id="equation-31.5)">
<p><span class="eqno">(5)<a class="headerlink" href="#equation-31.5)" title="Permalink to this equation">¶</a></span><span class="math">S_{atm} \, \downarrow _{nir} =\left(1-R_{nir} \right)\left[\left(1-\alpha \right)S_{atm} \right].</span></p>
</div><p>where <span class="math">\alpha</span> , the ratio of visible to total incident solar
radiation, is assumed to be</p>
<div class="math" id="equation-31.6)">
<p><span class="eqno">(6)<a class="headerlink" href="#equation-31.6)" title="Permalink to this equation">¶</a></span><span class="math">\alpha =\frac{S_{atm} \, \downarrow _{vis}^{\mu } +S_{atm} \, \downarrow _{vis}^{} }{S_{atm} } =0.5.</span></p>
</div><p>The ratio of direct to total incident radiation in the visible
<span class="math">R_{vis}</span>  is</p>
<div class="math" id="equation-31.7)">
<p><span class="eqno">(7)<a class="headerlink" href="#equation-31.7)" title="Permalink to this equation">¶</a></span><span class="math">R_{vis} =a_{0} +a_{1} \times \alpha S_{atm} +a_{2} \times \left(\alpha S_{atm} \right)^{2} +a_{3} \times \left(\alpha S_{atm} \right)^{3} \qquad 0.01\le R_{vis} \le 0.99</span></p>
</div><p>and in the near-infrared <span class="math">R_{nir}</span>  is</p>
<div class="math" id="equation-31.8)">
<p><span class="eqno">(8)<a class="headerlink" href="#equation-31.8)" title="Permalink to this equation">¶</a></span><span class="math">R_{nir} =b_{0} +b_{1} \times \left(1-\alpha \right)S_{atm} +b_{2} \times \left[\left(1-\alpha \right)S_{atm} \right]^{2} +b_{3} \times \left[\left(1-\alpha \right)S_{atm} \right]^{3} \qquad 0.01\le R_{nir} \le 0.99</span></p>
</div><p>where
<span class="math">a_{0} =0.17639,\, a_{1} =0.00380,\, a_{2} =-9.0039\times 10^{-6} ,\, a_{3} =8.1351\times 10^{-9}</span>
and
<span class="math">b_{0} =0.29548,b_{1} =0.00504,b_{2} =-1.4957\times 10^{-5} ,b_{3} =1.4881\times 10^{-8}</span>
are coefficients from polynomial fits to the placeCAM data.</p>
<p>The additional atmospheric forcing variables required by <a class="reference internal" href="../Ecosystem/CLM50_Tech_Note_Ecosystem.html#table-atmospheric-input-to-land-model"><span class="std std-numref">Table 2.4</span></a> are
derived as follows. The atmospheric reference height <span class="math">z'_{atm}</span>
(m) is set to 30 m. The directional wind components are derived as
<span class="math">u_{atm} =v_{atm} ={W_{atm} \mathord{\left/ {\vphantom {W_{atm}  \sqrt{2} }} \right. \kern-\nulldelimiterspace} \sqrt{2} }</span> .
The potential temperature <span class="math">\overline{\theta _{atm} }</span> (K) is set
to the atmospheric temperature <span class="math">T_{atm}</span> . The atmospheric
longwave radiation <span class="math">L_{atm} \, \downarrow</span>  (W m<sup>-2</sup>)
is derived from the atmospheric vapor pressure <span class="math">e_{atm}</span>  and
temperature <span class="math">T_{atm}</span>  (Idso 1981) as</p>
<div class="math" id="equation-31.9)">
<p><span class="eqno">(9)<a class="headerlink" href="#equation-31.9)" title="Permalink to this equation">¶</a></span><span class="math">L_{atm} \, \downarrow =\left[0.70+5.95\times 10^{-5} \times 0.01e_{atm} \exp \left(\frac{1500}{T_{atm} } \right)\right]\sigma T_{atm}^{4}</span></p>
</div><p>where</p>
<div class="math" id="equation-31.10)">
<p><span class="eqno">(10)<a class="headerlink" href="#equation-31.10)" title="Permalink to this equation">¶</a></span><span class="math">e_{atm} =\frac{P_{atm} q_{atm} }{0.622+0.378q_{atm} }</span></p>
</div><p>and <span class="math">\sigma</span>  is the Stefan-Boltzmann constant (W m<sup>-2</sup> K<span class="math">{}^{-4}</span>) (<a class="reference internal" href="../Ecosystem/CLM50_Tech_Note_Ecosystem.html#table-physical-constants"><span class="std std-numref">Table 2.7</span></a>). The fraction of
precipitation <span class="math">P</span> (mm s<sup>-1</sup>) falling as rain and/or
snow is</p>
<div class="math" id="equation-ZEqnNum336485">
<p><span class="eqno">(11)<a class="headerlink" href="#equation-ZEqnNum336485" title="Permalink to this equation">¶</a></span><span class="math">q_{rain} =P\left(f_{P} \right),</span></p>
</div><div class="math" id="equation-31.12)">
<p><span class="eqno">(12)<a class="headerlink" href="#equation-31.12)" title="Permalink to this equation">¶</a></span><span class="math">q_{snow} =P\left(1-f_{P} \right)</span></p>
</div><p>where</p>
<div class="math" id="equation-31.13)">
<p><span class="eqno">(13)<a class="headerlink" href="#equation-31.13)" title="Permalink to this equation">¶</a></span><span class="math">f_{P} =0&lt;0.5\left(T_{atm} -T_{f} \right)&lt;1.</span></p>
</div><p>The aerosol deposition rates <span class="math">D_{sp}</span>  (14 rates as described in
<a class="reference internal" href="../Ecosystem/CLM50_Tech_Note_Ecosystem.html#table-atmospheric-input-to-land-model"><span class="std std-numref">Table 2.4</span></a>) are provided by a
time-varying, globally-gridded aerosol deposition file developed by
<a class="reference internal" href="../References/CLM50_Tech_Note_References.html#lamarqueetal2010"><span class="std std-ref">Lamarque et al. (2010)</span></a>.</p>
<p>If the user wishes to provide atmospheric forcing data from another
source, the data format outlined above will need to be followed with the
following exceptions. The data atmosphere model will accept a
user-supplied relative humidity <span class="math">RH</span> (%) and derive specific
humidity <span class="math">q_{atm}</span>  (kg kg<sup>-1</sup>) from</p>
<div class="math" id="equation-31.14)">
<p><span class="eqno">(14)<a class="headerlink" href="#equation-31.14)" title="Permalink to this equation">¶</a></span><span class="math">q_{atm} =\frac{0.622e_{atm} }{P_{atm} -0.378e_{atm} }</span></p>
</div><p>where the atmospheric vapor pressure <span class="math">e_{atm}</span>  (Pa) is derived
from the water (<span class="math">T_{atm} &gt;T_{f}</span> ) or ice
(<span class="math">T_{atm} \le T_{f}</span> ) saturation vapor pressure
<span class="math">e_{sat}^{T_{atm} }</span>  as
<span class="math">e_{atm} =\frac{RH}{100} e_{sat}^{T_{atm} }</span>  where <span class="math">T_{f}</span>
is the freezing temperature of water (K) (<a class="reference internal" href="../Ecosystem/CLM50_Tech_Note_Ecosystem.html#table-physical-constants"><span class="std std-numref">Table 2.7</span></a>), and
<span class="math">P_{atm}</span>  is the pressure at height <span class="math">z_{atm}</span>  (Pa). The
data atmosphere model will also accept a user-supplied dew point
temperature <span class="math">T_{dew}</span>  (K) and derive specific humidity
<span class="math">q_{atm}</span>  from</p>
<div class="math" id="equation-31.15)">
<p><span class="eqno">(15)<a class="headerlink" href="#equation-31.15)" title="Permalink to this equation">¶</a></span><span class="math">q_{atm} = \frac{0.622e_{sat}^{T_{dew} } }{P_{atm} -0.378e_{sat}^{T_{dew} } } .</span></p>
</div><p>Here, <span class="math">e_{sat}^{T}</span> , the saturation vapor pressure as a function
of temperature, is derived from <a class="reference internal" href="../References/CLM50_Tech_Note_References.html#lowe1977"><span class="std std-ref">Lowe’s (1977)</span></a> polynomials. If not
provided by the user, the atmospheric pressure <span class="math">P_{atm}</span>  (Pa) is
set equal to the standard atmospheric pressure <span class="math">P_{std} =101325</span>
Pa, and surface pressure <span class="math">P_{srf}</span>  (Pa) is set equal
to<span class="math">P_{atm}</span> .</p>
<p>The user may provide the total direct and diffuse solar radiation,
<span class="math">S_{atm} \, \downarrow ^{\mu }</span>  and
<span class="math">S_{atm} \, \downarrow</span> . These will be time-interpolated using
the procedure described above and then each term equally apportioned
into the visible and near-infrared wavebands (e.g.,
<span class="math">S_{atm} \, \downarrow _{vis}^{\mu } =0.5S_{atm} \, \downarrow ^{\mu }</span> ,
<span class="math">S_{atm} \, \downarrow _{nir}^{\mu } =0.5S_{atm} \, \downarrow ^{\mu }</span> ).</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../References/CLM50_Tech_Note_References.html" title="32. References"
             >next</a> |</li>
        <li class="right" >
          <a href="../Isotopes/CLM50_Tech_Note_Isotopes.html" title="30. Carbon Isotopes"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">clmdoc  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >CLM Technical Note</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Erik Kluzek, Bill Sacks, Ben Andre.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.4.
    </div>
  </body>
</html>